function editRecord(n,t){var r=$(n).attr("rel"),i=JSON.parse(r);return document.getElementById("tableName").innerHTML=t,$(".modal-body #id").val(i.id),$(".modal-body #desc").val(i.desc),$("#tagDiv").hide(),t=="DESCRIPTION"&&($(".modal-body #tag").val(i.tag),$("#tagDiv").show()),$(".modal-body #createdAtUtc").val(i.createdAtUtc),$("#dialog-edit").dialog({title:"Edit Record",autoOpen:!1,resizable:!1,height:"auto",width:400,show:{effect:"drop",direction:"up"},modal:!0,draggable:!0,buttons:{Save:function(){event.preventDefault();var i={};i.id=$(".modal-body #id").val();i.desc=$(".modal-body #desc").val();t=="DESCRIPTION"&&(i.tag=$(".modal-body #tag").val());i.createdAtUtc=$(".modal-body #createdAtUtc").val();editConfirmed(n,t,i);$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}),$("#dialog-edit").dialog("open"),!1}function editConfirmed(n,t,i){var u="/"+t+"/Edit",r=$.ajax({type:"POST",url:u,data:{id:i.id,desc:i.desc,tag:i.tag,createdAtUtc:i.createdAtUtc},accept:"application/json"});r.done(function(n,t,i){var r=JSON.parse(i.responseText);r.success?alert("done"):alert("Failure is not an option")});r.fail(function(n,t,i){if(n.status!==null)switch(n.status){case"404":alert(n.status+": Page not found ");break;default:alert(n.status+": "+n.statusText)}alert("error here");t!==null&&alert("Error Status: "+t);alert("HTTP error thrown: "+i)})}function deleteRecord(n,t){var r=$(n).closest("tr").css("background-color"),u=$(n).closest("tr").css("color"),i;return $(n).closest("tr").css({"background-color":"yellow",color:"blue"}),i=$("#dialog-confirm").dialog({autoOpen:!1,resizable:!1,height:"auto",width:350,show:{effect:"blind",duration:1e3},hide:{effect:"clip",duration:1e3},modal:!0,draggable:!0,buttons:{OK:function(){event.preventDefault();deleteConfirmed(n,t,r,u);i.dialog("close")},Cancel:function(){$(n).closest("tr").css({"background-color":r,color:u});i.dialog("close")}}}),i.dialog("open"),!1}function deleteConfirmed(n,t,i,r){var f=$(n).attr("rel"),e="/"+t+"/Remove",u=$.post(e,{id:f});u.done(function(t,u,f){var e=JSON.parse(f.responseText);e.success?$(n).closest("tr").remove():(alert(e.status),$(n).closest("tr").css({"background-color":i,color:r}))});u.fail(function(n,t,i){if(n.status!==null)switch(n.status){case"404":alert(n.status+": Page not found ");break;default:alert(n.status+": "+n.statusText)}alert("error here");t!==null&&alert("Error Status: "+t);alert("HTTP error thrown: "+i)})}function editRecordBootstrap(n){var i=$(n).attr("rel"),t,r,u;alert(i);t=JSON.parse(i);r=t.desc;alert(r);u=t.createdAtUtc;alert(u);$(".modal-body #desc").val(t.desc);$(".modal-body #tag").val(t.tag);$(".modal-body #createdAtUtc").val(t.createdAtUtc);$(".editDialog").modal("show",function(){return e.preventDefault(),$("#dialog-edit").dialog("open"),!1})}function showRelatedTable(n,t){var r="/"+t,i;switch(t){case"SystemsDescription":r+="/LoadSystems";break;case"SystemTab":r+="/LoadDeployments";break;case"Component":r+="/LoadActivities";break;case"Location":r+="/LoadSystems";break;default:r+="/LoadComponents"}return(i=null,$.ajax({method:"GET",url:r,data:{tableName:t,descId:n},async:!1,cache:!1}).done(function(n){switch(t){case"Component":n.length>0&&(i=showComponentActivities(n));break;case"SystemTab":n.length>0&&(i=showDeployments(n));break;case"SystemsDescription":n.length>0&&(i=showSystems(n));break;case"Location":n.length>0&&(i=showSystems(n));break;default:n.length>0&&(i=showRelatedComponents(n))}}),i!==null)?i:"<p> No Records to Display <\/p>"}function showComponentActivities(n){return nestedTable='<tr><td colspan="4"><table class="table table-striped table-condensed table-hover table-component" cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><thead><th>Deployment ID<\/th><th>Test System<\/th><th>Work Order<\/th><th>Schedule<\/th><th>eRecord<\/th><th>Deployment Date<\/th><th>WO Scheduled Due<\/th><th>WO Done Date<\/th><th>WO Calculated Due<\/th><th>Activity Type<\/th><th>Service Provider<\/th><th>Status<\/th><\/tr><\/thead><tbody>',$.each(n,function(n,t){nestedTable+="<tr><td>"+t.deploymentID+"<\/td><td>"+t.systemID+"<\/td><td>"+t.work_Order+"<\/td><td>"+t.schedule+"<\/td><td>"+t.eRecord+"<\/td>";nestedTable+=t.deploymentDate!==null?"<td>"+formattedDate(t.deploymentDate)+"<\/td>":"<td><\/td>";nestedTable+=t.wO_Scheduled_Due!==null?"<td>"+formattedDate(t.wO_Scheduled_Due)+"<\/td>":"<td><\/td>";nestedTable+=t.wO_Done_Date!==null?"<td>"+formattedDate(t.wO_Done_Date)+"<\/td>":"<td><\/td>";nestedTable+=t.wO_Calculated_Due_Date!==null?"<td>"+formattedDate(t.wO_Calculated_Due_Date)+"<\/td>":"<td><\/td>";nestedTable+=t.activityTypeID!==null?"<td>"+t.activityType.desc+"<\/td>":"<td><\/td>";nestedTable+=t.serviceProviderID!==null?"<td>"+t.serviceProvider.desc+"<\/td>":"<td><\/td>";nestedTable+=t.statusID!==null?"<td>"+t.status.desc+"<\/td>":"<td><\/td>";nestedTable+="<\/tr>"}),nestedTable+="<\/tbody><\/table><\/td><\/tr>"}function showSystems(n){return nestedTable='<tr><td colspan="4"><table class="table table-striped table-condensed table-hover table-component" cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><thead><tr><th>IMTE<\/th><th>Reference No.<\/th><th>System Description<\/th><th>Deployment Date<\/th><th>Location<\/th><\/tr><\/thead><tbody>',$.each(n,function(n,t){nestedTable+="<tr><td>"+t.imte+"<\/td><td>"+t.referenceNo+"<\/td>";nestedTable+=t.systemsDescriptionID!==null?"<td>"+t.systemsDescription.desc+"<\/td>":"<td><\/td>";nestedTable+=t.deploymentDate!==null?"<td>"+formattedDate(t.deploymentDate)+"<\/td>":"<td><\/td>";nestedTable+=t.locationID!==null?"<td>"+t.location.desc+"<\/td>":"<td><\/td>";nestedTable+="<\/tr>"}),nestedTable+="<\/tbody><\/table><\/td><\/tr>"}function showRelatedComponents(n){return nestedTable='<tr><td colspan="4"><table class="table table-striped table-condensed table-hover table-component" cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><thead><tr><th>Index<\/th><th>Asset#<\/th><th>IMTE<\/th><th>Serial Number<\/th><th>Description<\/th><th>Owner<\/th><th>Status<\/th><th>Model/Manufacturer<\/th><th>Service Provider<\/th><th>Calibration Due Date<\/th><th>Maintenance Due Date<\/th><\/tr><\/thead><tbody>',n,$.each(n,function(n,t){nestedTable+="<tr><td>"+(n+1)+"<\/td><td>"+t.assetnumber+"<\/td><td>"+t.imte+"<\/td><td>"+t.serialnumber+"<\/td>";nestedTable+=t.description!==null?"<td>"+t.description.desc+"<\/td>":"<td><\/td>";nestedTable+=t.owner!==null?"<td>"+t.owner.desc+"<\/td>":"<td><\/td>";nestedTable+=t.status!==null?"<td>"+t.status.desc+"<\/td>":"<td><\/td>";nestedTable+=t.model_Manufacturer!==null?"<td>"+t.model_Manufacturer.desc+"<\/td>":"<td><\/td>";nestedTable+=t.providerOfService!==null?"<td>"+t.providerOfServiceID.desc+"<\/td>":"<td><\/td>";nestedTable+=t.calibrationDate!==null?"<td>"+formattedDate(t.calibrationDate)+"<\/td>":"<td><\/td>";nestedTable+=t.maintenanceDate!==null?"<td>"+formattedDate(t.maintenanceDate)+"<\/td>":"<td><\/td>"}),nestedTable+="<\/tbody><\/table><\/td><\/tr>"}function showDeployments(n){return nestedTable='<tr><td colspan="4"><table class="table table-striped table-condensed table-hover table-component" cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><thead><th>Deployment ID<\/th><th>Reference No.<\/th><th>Deployment Date<\/th><th>Location<\/th><\/tr><\/thead><tbody>',$.each(n,function(n,t){nestedTable+="<tr><td>"+t.deploymentID+"<\/td><td>"+t.referenceNo+"<\/td>";nestedTable+=t.deploymentDate!==null?"<td>"+formattedDate(t.deploymentDate)+"<\/td>":"<td><\/td>";nestedTable+=t.locationID!==null?"<td>"+t.location.desc+"<\/td>":"<td><\/td>";nestedTable+="<\/tr>"}),nestedTable+="<\/tbody><\/table><\/td><\/tr>"}function showComponentDDL(){$("#divComponent").parent().addClass("hidden");var n=$("#ComponentDescID option:selected").val();n!==null&&$.getJSON("/Systems/LoadComponents",{descId:n},function(n){var t=$("#ComponentID");t.empty();t.append($("<option/>",{value:0,text:"Select a Component"}));$.each(n,function(n,i){t.append($("<option/>",{value:i.value,text:i.text}))});$("#divComponent").parent().slideDown().removeClass("hidden");$("#imteX tr").each(function(){$(this).children("td").each(function(n){if(n===0){var t=$(this).text().trim();$("#ComponentID option:contains("+t+")").prop("disabled",!0).addClass("strikethrough")}})})})}function addIMTE(){document.getElementById("imteX").rows.length===0&&$("#imteX").append('<thead><tr><th scope="col">IMTE<\/th><th scope="col">Description<\/th><th scope="col">Calibration Date<\/th><th scope="col">Maintenance Date<\/th><th scope="col" + >Orientation<\/th><\/tr><\/thead>');$("#ComponentID option:selected").each(function(){var n=/\s*(\w+)\s*\{?([A-Za-z0-9/-]*)\}?\{?([A-Za-z0-9/-]*)\}?$/.exec($(this)[0].text),t=$(".moduleRadio:checked").val(),i=document.querySelector(".moduleRadio:checked").parentNode.id;$("#imteX > tbody:last").append('<tr><td> <input type = "textbox" name = "selectedIMTEs" value = '+t+$(this)[0].value+" hidden >"+n[1]+"<\/td><td>"+$("#ComponentDescID option:selected").val()+"<\/td><td>"+n[2]+"<\/td><td>"+n[3]+"<\/td><td>"+i+'<\/td><td><a href="#!" id=a'+$(this)[0].value+' class="remove" rel='+$(this)[0].value+' onclick="returnIMTE(this)">Remove<\/a><\/td><\/tr>');$(this).prop("disabled",!0).addClass("strikethrough")});$("#ComponentID option:eq(0)").prop("selected",!0)}function returnIMTE(n){var t=$("#"+n.id).attr("rel");$("#ComponentID option[value="+t+"]").removeAttr("disabled").removeClass("strikethrough");$("#a"+t).closest("tr").remove()}function formattedDate(n){var r=new Date(n||Date.now()),t=""+r.getDate(),i=""+(r.getMonth()+1),u=r.getFullYear();return i.length<2&&(i="0"+i),t.length<2&&(t="0"+t),[t,i,u].join("/")}function convertDate(n){function i(n){return n<10?"0"+n:n}var t=new Date(n);return[i(t.getDate()),i(t.getMonth()+1),t.getFullYear()].join("/")}function formatThis(n){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td>IMTE:<\/td><td>'+n[1]+"<\/td><\/tr><tr><td>Serial number:<\/td><td>"+n[2]+"<\/td><\/tr><tr><td>Extra info:<\/td><td>And any further details here (images etc)...<\/td><\/tr><\/table>"}function loadjscssfile(n,t){if(t==="js"){alert("inside loadjscssfile");var i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",n);alert("file loaded")}else t==="css"&&(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",n));typeof i!="undefined"&&document.getElementsByTagName("head")[0].appendChild(i)}function removejscssfile(n,t){var i;alert("inside removejscssfile");var f=t==="js"?"script":t==="css"?"link":"none",u=t==="js"?"src":t==="css"?"href":"none",r=document.getElementsByTagName(f);for(i=r.length;i>=0;i--)r[i]&&r[i].getAttribute(u)!==null&&r[i].getAttribute(u).indexOf(n)!==-1&&r[i].parentNode.removeChild(r[i])}function checkloadjscssfile(n,t){filesadded.indexOf("["+n+"]")===-1?(loadjscssfile(n,t),filesadded+="["+n+"]",alert("file loaded")):alert("file already added!")}$.fn.serializeObject=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};$(document).ready(function(){var n;$("table.dataTable").DataTable({lengthMenu:[[25,10,50,-1],[25,10,50,"All"]]});$("table#scrollingTable").DataTable({scrollY:"218px",scrollCollapse:!1,paging:!1,select:!0,buttons:[{extend:"create",editor:n},{extend:"edit",editor:n},{extend:"remove",editor:n}]});$("#nestedTable tbody").on("click","td.details-control",function(){var u=$("#nestedTable").DataTable(),n=$(this).closest("tr"),f=n.attr("rel").trim(),r=/\s*(\w+)\s*TrackMED.Models.(.+$)/.exec(f),i=u.row(n),t=$(this).closest("td");i.child.isShown()?(i.child.hide(),n.removeClass("shown"),t.removeClass("glyphicon-minus"),t.addClass("glyphicon-plus")):(i.child(showRelatedTable(r[1],r[2])).show(),n.addClass("shown"),t.removeClass("glyphicon-plus"),t.addClass("glyphicon-minus"))})});